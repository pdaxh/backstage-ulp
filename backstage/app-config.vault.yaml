app:
  title: Backstage ULP
  baseUrl: http://localhost:7007

backend:
  baseUrl: http://localhost:7007
  listen:
    port: 7007
  csp:
    connect-src: ["'self'", 'http:', 'https:']
  cors:
    origin: http://localhost:3000
    methods: [GET, HEAD, PATCH, POST, PUT, DELETE]
    credentials: true

# Vault configuration
vault:
  addr: ${VAULT_ADDR:-http://localhost:8200}
  token: ${VAULT_TOKEN:-dev-root-token}

# Database configuration (from Vault)
database:
  client: pg
  connection:
    host: ${PGHOST:-localhost}
    port: ${PGPORT:-5432}
    user: ${PGUSER:-backstage}
    password: ${PGPASSWORD:-backstage}
    database: ${PGDATABASE:-backstage}

# Authentication (from Vault)
auth:
  environment: development
  providers:
    github:
      development:
        clientId: ${GITHUB_CLIENT_ID:-your_github_client_id}
        clientSecret: ${GITHUB_CLIENT_SECRET:-your_github_client_secret}
        organization: ${GITHUB_ORGANIZATION:-your_org}

# Secrets (from Vault)
secrets:
  backend:
    secret: ${BACKEND_SECRET:-dev-secret-please-change}
  frontend:
    secret: ${FRONTEND_SECRET:-frontend-secret}
  session:
    secret: ${SESSION_SECRET:-session-secret}

# TechDocs
techdocs:
  builder: 'local'
  generator:
    runIn: 'docker'
  publisher:
    type: 'local'

# Catalog
catalog:
  locations:
    - type: url
      target: https://github.com/backstage/backstage/blob/master/packages/catalog-model/examples/all.yaml
    - type: file
      target: /app/examples/react-frontend.yaml
    - type: file
      target: /app/examples/monitoring-stack.yaml

# Proxy
proxy:
  '/vault':
    target: ${VAULT_ADDR:-http://localhost:8200}
    changeOrigin: true
    pathRewrite:
      '^/vault': ''

# Logging
logging:
  level: info
  format: json
  redact:
    - password
    - secret
    - token
    - key
